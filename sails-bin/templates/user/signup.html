{% extends "base.html" %}
{% block title %}Sign up{% endblock title %}
{% block head %}
    {% call super() %}
    <!-- Custom styles for sign in page -->
    <link href="/static/css/signin.css" rel="stylesheet">
    <script src="https://www.recaptcha.net/recaptcha/api.js" async defer></script>
    <script>
    function enableBtn(){
      document.getElementById("signup-submit").disabled = false;
    }
    </script>
{% endblock head %}

{% block body %}
<main class="form-signin text-center">
  <form action="create_user" method="post" class="submit-once" id="signup-form">
    <h1 class="h3 mb-3 fw-normal">Please enter information</h1>

    <div class="form-floating">
      <input type="email" class="form-control" id="floatingEmail" placeholder="Email" name="user_info[email]">
      <label for="floatingInput">Outlook Email</label>
    </div>
    <div class="form-floating">
      <input type="text" class="form-control" id="floatingName" placeholder="Name" name="user_info[name]">
      <label for="floatingInput">Name</label>
    </div>
    <div class="form-floating">
      <input type="text" class="form-control" id="floatingSchool" placeholder="School" name="user_info[school]">
      <label for="floatingInput">School</label>
    </div>
    <div class="form-floating">
      <input type="password" class="form-control" id="floatingPassword" placeholder="Password" name="user_info[password]">
      <label for="floatingPassword">Password</label>
    </div>
    <div class="g-recaptcha" data-sitekey="{{ recaptcha_key }}" data-callback="enableBtn"></div>
    <br/>
    <button class="w-100 btn btn-lg btn-primary" type="submit" id="signup-submit" onclick="onSubmit()" disabled="disabled">Sign up</button>
  </form>
  {% include "display_flash.html" %}
</main>

{% block script %}
  {% call super()%}
  <script type="text/javascript">
  $('form.submit-once').submit(function(e){
    if( $(this).hasClass('form-submitted') ){
        e.preventDefault();
        return;
    }
    $(this).addClass('form-submitted');
  });
  </script>

  <script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="9a9d77d4-fad3-4ab1-9022-e0f6856ab746";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>
{% endblock script %}

{% endblock body %}
